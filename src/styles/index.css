/* src/styles/index.css */
@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
    :root {
        /* Typography */
        --font-primary: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
        --font-primary-regular-weight: 400;
        --font-primary-medium-weight: 500;
        --font-primary-semibold-weight: 600;

        /* Main Colors - 珊瑚 */
        --color-primary: 3 76% 58%; /* #E34C45 */
        --color-primary-light: 5 100% 89%; /* #FFCBC7 */
        --color-primary-dark: 3 67% 47%; /* #C92E27 */

        /* Neutral Colors (Monochromatic) */
        --color-white: 0 0% 100%;
        --color-almost-white: 0 0% 99.5%;
        --color-grey-ultra-light: 0 20% 98%; /* #FDF7F7 */
        --color-grey-light: 220 16% 91%; /* #E3E4EA */
        --color-grey-medium: 210 13% 60%; /* #8C96A3 */
        --color-grey-dark: 210 19% 23%; /* #2D3748 */
        --color-grey-deep: 210 20% 15%; /* #1D2530 */

        /* Functional Colors from Scheme 8 */
        --color-success: 148 53% 61%; /* #68D391 */
        --color-info: 207 82% 66%; /* #63B3ED */
        --color-warning: 39 90% 66%; /* #F6AD55 */
        --color-error: 3 76% 58%; /* #E34C45 */

        /* UI Elements */
        --border-radius-small: 2px;
        --border-radius-base: 6px;
        --border-radius-large: 10px;
        --border-radius-full: 9999px;

        /* Shadows (Softer) */
        --shadow-interactive: 0 2px 5px 0 hsl(var(--color-grey-dark) / 0.04);
        --shadow-popover: 0 5px 15px 0 hsl(var(--color-grey-dark) / 0.05);
        --shadow-modal: 0 10px 30px 0 hsl(var(--color-grey-dark) / 0.07);
        --focus-glow-primary-shadow: 0 0 0 3px hsl(var(--color-primary) / 0.25),
        0 0 0 6px hsl(var(--color-primary) / 0.1);

        /* CORRECTED: Define transition timing function variable */
        --timing-app-ease-out: cubic-bezier(0, 0, 0.2, 1);

        /* AI Glow Gradients (Updated for richer palettes) */
        --ai-glow-gradient-red: linear-gradient(90deg, #F25EA6, #E34C45, #F76F33, #F2881C, #F25EA6);
        --ai-glow-gradient-yellow: linear-gradient(90deg, #F78C33, #F6AD55, #FFDB1A, #A3CC33, #F78C33);
        --ai-glow-gradient-blue: linear-gradient(90deg, #4ADCF2, #63B3ED, #738AF2, #9C6BF7, #4ADCF2);
        --ai-glow-gradient-neutral: linear-gradient(90deg, #ADC9F5, #CDE5EF, #D2BDEF, #F7D9E0, #ADC9F5);
    }

    body {
        font-family: var(--font-primary), sans-serif;
        font-weight: var(--font-primary-regular-weight);
        font-size: 13.5px;
        line-height: 1.65;
        background-color: hsl(var(--color-white));
        color: hsl(var(--color-grey-dark));
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
    }

    html {
        scroll-behavior: smooth;
    }

    *:focus {
        outline: none;
    }

    *:focus-visible, [data-radix-focus-visible]:focus-visible {
        outline: none !important;
    }

    .styled-scrollbar::-webkit-scrollbar, .styled-scrollbar-thin::-webkit-scrollbar {
        width: 6px;
        height: 6px;
    }

    .styled-scrollbar::-webkit-scrollbar-track, .styled-scrollbar-thin::-webkit-scrollbar-track {
        background-color: transparent;
    }

    .styled-scrollbar::-webkit-scrollbar-thumb, .styled-scrollbar-thin::-webkit-scrollbar-thumb {
        background-color: hsl(var(--color-grey-medium) / 0.3);
        border-radius: var(--border-radius-full);
    }

    .styled-scrollbar::-webkit-scrollbar-thumb:hover, .styled-scrollbar-thin::-webkit-scrollbar-thumb:hover {
        background-color: hsl(var(--color-grey-medium) / 0.5);
    }

    .styled-scrollbar::-webkit-scrollbar-corner, .styled-scrollbar-thin::-webkit-scrollbar-corner {
        background: transparent;
    }

    .cm-editor {
        font-family: var(--font-primary), monospace !important;
        font-weight: var(--font-primary-regular-weight) !important;
        font-size: 13.5px !important;
        line-height: 1.65 !important;
        color: hsl(var(--color-grey-dark)) !important;
    }

    .cm-gutters {
        background-color: hsl(var(--color-grey-ultra-light)) !important;
        border-right: 0.5px solid hsl(var(--color-grey-light)) !important;
    }

    .cm-content {
        caret-color: hsl(var(--color-primary));
    }

    .cm-selectionBackground, ::selection {
        background-color: hsl(var(--color-primary-light) / 0.5) !important;
    }

    input[type="search"]::-webkit-search-decoration, input[type="search"]::-webkit-search-cancel-button, input[type="search"]::-webkit-search-results-button, input[type="search"]::-webkit-search-results-decoration {
        -webkit-appearance: none;
        display: none;
    }

    input[type="search"]::-ms-clear, input[type="search"]::-ms-reveal {
        display: none;
        width: 0;
        height: 0;
    }

    input, textarea, select {
        border: none;
        background-color: transparent;
    }

    input::placeholder, textarea::placeholder {
        color: hsl(var(--color-grey-medium));
        opacity: 1;
    }

    button, a, [role="button"], input[type="checkbox"], input[type="radio"] {
        transition-property: color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter;
        transition-timing-function: var(--timing-app-ease-out);
        transition-duration: 150ms;
    }
}

@layer components {
    .ai-glow-anim-border {
        position: relative;
        padding: 2px; /* This padding acts as the visible border thickness */
        border-radius: inherit; /* Inherits border-radius from the element it's applied to (e.g., rounded-base) */
        background-clip: padding-box; /* Ensures background (gradient) is clipped to padding box */
        background-size: 300% 100%; /* For the flowing animation, matches example */
        z-index: 0; /* Establishes a stacking context */
        /* The 'animate-border-flow' class from Tailwind will apply the actual animation property */
    }

    .ai-glow-anim-border::before {
        content: "";
        position: absolute;
        /* Adjusted for a tighter glow */
        top: -2px; /* Controls how far the glow source extends */
        left: -2px;
        right: -2px;
        bottom: -2px;
        background: inherit; /* Inherits the animated gradient from the parent */
        background-size: inherit; /* Inherits background-size for consistent animation */
        border-radius: inherit; /* Glow shape matches the parent's border-radius */
        z-index: -1; /* Positioned behind the parent's content */
        /* Adjusted blur and opacity for a more subtle effect */
        filter: blur(5px);
        opacity: 0.75;
        transform: translateZ(0); /* May improve rendering performance by promoting to a new layer */
    }

    .ai-glow-theme-red {
        background-image: var(--ai-glow-gradient-red);
    }

    .ai-glow-theme-yellow {
        background-image: var(--ai-glow-gradient-yellow);
    }

    .ai-glow-theme-blue {
        background-image: var(--ai-glow-gradient-blue);
    }

    .ai-glow-theme-neutral {
        background-image: var(--ai-glow-gradient-neutral);
    }
}